

<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
      MousePosition.js - Documentation
  </title>

  <link href="https://www.braintreepayments.com/images/favicon-ccda0b14.png" rel="icon" type="image/png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
  

  

  <!-- start Mixpanel -->
  <script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("1919205b2da72e4da3b9b6639b444d59");</script>
  <!-- end Mixpanel -->
</head>

<body>
  <svg style="display: none;">
    <defs>
      <symbol id="linkIcon" fill="#706d77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
      </symbol>
    </defs>
  </svg>

  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
  </label>

  <label for="nav-trigger" class="overlay"></label>

  <div class="top-nav-wrapper">
    <ul>
      <li >
        <a href="index.html">
          
            <svg fill="#6D6D6D" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
              <path d="M0 0h24v24H0z" fill="none"/>
            </svg>
          
          
        </a>
      </li>

      

    </ul>
  </div>

  <nav>
    <h3 class="reference-title">
      CartoCosmos
    </h3>

    
      <h3>
        Resources
      </h3>
      
        <a href="https://github.com/CartoCosmos/CartoCosmos">GitHub</a>
      
    

    <h3>Classes</h3><ul><li id="AstroDraw-nav"><a href="AstroDraw.html">AstroDraw</a><ul class='methods'><li data-type="method" id="AstroDraw-mapWKTString-nav"><a href="AstroDraw.html#mapWKTString">mapWKTString</a></li><li data-type="method" id="AstroDraw-onAdd-nav"><a href="AstroDraw.html#onAdd">onAdd</a></li><li data-type="method" id="AstroDraw-shapesToWKT-nav"><a href="AstroDraw.html#shapesToWKT">shapesToWKT</a></li></ul></li><li id="AstroMap-nav"><a href="AstroMap.html">AstroMap</a><ul class='methods'><li data-type="method" id="AstroMap-changeProjection-nav"><a href="AstroMap.html#changeProjection">changeProjection</a></li><li data-type="method" id="AstroMap-currentLayer-nav"><a href="AstroMap.html#currentLayer">currentLayer</a></li><li data-type="method" id="AstroMap-hasNorthPolar-nav"><a href="AstroMap.html#hasNorthPolar">hasNorthPolar</a></li><li data-type="method" id="AstroMap-hasSouthPolar-nav"><a href="AstroMap.html#hasSouthPolar">hasSouthPolar</a></li><li data-type="method" id="AstroMap-loadLayerCollection-nav"><a href="AstroMap.html#loadLayerCollection">loadLayerCollection</a></li><li data-type="method" id="AstroMap-projection-nav"><a href="AstroMap.html#projection">projection</a></li><li data-type="method" id="AstroMap-setCurrentLayer-nav"><a href="AstroMap.html#setCurrentLayer">setCurrentLayer</a></li><li data-type="method" id="AstroMap-target-nav"><a href="AstroMap.html#target">target</a></li></ul></li><li id="AstroMath-nav"><a href="AstroMath.html">AstroMath</a><ul class='methods'><li data-type="method" id="AstroMath-domainToPositiveWest-nav"><a href="AstroMath.html#domainToPositiveWest">domainToPositiveWest</a></li><li data-type="method" id="AstroMath-getMajorRadius-nav"><a href="AstroMath.html#getMajorRadius">getMajorRadius</a></li><li data-type="method" id="AstroMath-getMinorRadius-nav"><a href="AstroMath.html#getMinorRadius">getMinorRadius</a></li><li data-type="method" id="AstroMath-latToPlanetOgraphic-nav"><a href="AstroMath.html#latToPlanetOgraphic">latToPlanetOgraphic</a></li><li data-type="method" id="AstroMath-lonTo360-nav"><a href="AstroMath.html#lonTo360">lonTo360</a></li><li data-type="method" id="AstroMath-toDegrees-nav"><a href="AstroMath.html#toDegrees">toDegrees</a></li><li data-type="method" id="AstroMath-toRadians-nav"><a href="AstroMath.html#toRadians">toRadians</a></li><li data-type="method" id="AstroMath-wrapLongitude-nav"><a href="AstroMath.html#wrapLongitude">wrapLongitude</a></li></ul></li><li id="AstroProj-nav"><a href="AstroProj.html">AstroProj</a><ul class='methods'><li data-type="method" id="AstroProj-getRadii-nav"><a href="AstroProj.html#getRadii">getRadii</a></li><li data-type="method" id="AstroProj-getStringAndCode-nav"><a href="AstroProj.html#getStringAndCode">getStringAndCode</a></li></ul></li><li id="LayerCollection-nav"><a href="LayerCollection.html">LayerCollection</a><ul class='methods'><li data-type="method" id="LayerCollection-addTo-nav"><a href="LayerCollection.html#addTo">addTo</a></li><li data-type="method" id="LayerCollection-createBaseLayers-nav"><a href="LayerCollection.html#createBaseLayers">createBaseLayers</a></li><li data-type="method" id="LayerCollection-createOverlays-nav"><a href="LayerCollection.html#createOverlays">createOverlays</a></li><li data-type="method" id="LayerCollection-initialize-nav"><a href="LayerCollection.html#initialize">initialize</a></li><li data-type="method" id="LayerCollection-isEmpty-nav"><a href="LayerCollection.html#isEmpty">isEmpty</a></li><li data-type="method" id="LayerCollection-loadWFS-nav"><a href="LayerCollection.html#loadWFS">loadWFS</a></li><li data-type="method" id="LayerCollection-loadWFS-nav"><a href="LayerCollection.html#loadWFS">loadWFS</a></li><li data-type="method" id="LayerCollection-onEachFeature-nav"><a href="LayerCollection.html#onEachFeature">onEachFeature</a></li><li data-type="method" id="LayerCollection-parseJSON-nav"><a href="LayerCollection.html#parseJSON">parseJSON</a></li><li data-type="method" id="LayerCollection-pointToLayer-nav"><a href="LayerCollection.html#pointToLayer">pointToLayer</a></li></ul></li><li id="MousePosition-nav"><a href="MousePosition.html">MousePosition</a><ul class='methods'><li data-type="method" id="MousePosition-addInitHook-nav"><a href="MousePosition.html#addInitHook">addInitHook</a></li><li data-type="method" id="MousePosition-changeLatType-nav"><a href="MousePosition.html#changeLatType">changeLatType</a></li><li data-type="method" id="MousePosition-changeLonDirection-nav"><a href="MousePosition.html#changeLonDirection">changeLonDirection</a></li><li data-type="method" id="MousePosition-changeLonDomain-nav"><a href="MousePosition.html#changeLonDomain">changeLonDomain</a></li><li data-type="method" id="MousePosition-mergeOptions-nav"><a href="MousePosition.html#mergeOptions">mergeOptions</a></li><li data-type="method" id="MousePosition-mousePosition-nav"><a href="MousePosition.html#mousePosition">mousePosition</a></li><li data-type="method" id="MousePosition-onAdd-nav"><a href="MousePosition.html#onAdd">onAdd</a></li><li data-type="method" id="MousePosition-onMouseMove-nav"><a href="MousePosition.html#onMouseMove">onMouseMove</a></li><li data-type="method" id="MousePosition-onMouseOut-nav"><a href="MousePosition.html#onMouseOut">onMouseOut</a></li><li data-type="method" id="MousePosition-onRemove-nav"><a href="MousePosition.html#onRemove">onRemove</a></li></ul></li><li id="Projection-nav"><a href="Projection.html">Projection</a><ul class='methods'><li data-type="method" id="Projection-loadCylindrical-nav"><a href="Projection.html#loadCylindrical">loadCylindrical</a></li><li data-type="method" id="Projection-loadNorthPolar-nav"><a href="Projection.html#loadNorthPolar">loadNorthPolar</a></li><li data-type="method" id="Projection-loadSouthPolar-nav"><a href="Projection.html#loadSouthPolar">loadSouthPolar</a></li><li data-type="method" id="Projection-onAdd-nav"><a href="Projection.html#onAdd">onAdd</a></li></ul></li></ul>
  </nav>

  <div id="main">
    
      <h1 class="page-title">
        MousePosition.js
      </h1>
    

    
      

<section>
  <article>
    <pre class="prettyprint source linenums"><code>import AstroMath from "./AstroMath";
import "leaflet";
/**
 * @class MousePosition
 * @aka L.Control.AstroMousePosition
 * @extends L.Control
 * 
 * @classdesc Class that inherits from the class L.Control and handles the back-end when a user clicks on the lat/lon buttons.
 * Since this class inherits L.Control, it is added to the AstroMap in the same way as other controls, like the zoom control.
 *
 * @example
 * // initialize the control with an options object.
 * mouseControl = L.astroMousePosition({numDigits: 2, prefix: "Lat Lon: ",targetPlanet: "mars"});
 * // add control to map
 * mouseControl.addTo(map);
 */
export default L.Control.MousePosition = L.Control.extend({
  options: {
    separator: ", ",
    numDigits: 5,
    prefix: "",
    lngFirst: true
  },

  /**
   * @function MousePosition.prototype.onAdd
   * @description Grabs the lat/lon buttons from the GUI and adds on-change events to them. It also adds an on mouse-over event to the AstroMap to grab the current mouse position of the user's mouse pointer.
   * @param  {AstroMap} map - The AstroMap to add the control to.
   * @return {Object} The div-container the control is in.
   */
  onAdd: function(map) {
    this.container = L.DomUtil.create("div", "leaflet-control-mouseposition");
    L.DomEvent.disableClickPropagation(this.container);
    map.on("mousemove", this.onMouseMove, this);
    map.on("mouseout", this.onMouseOut, this);

    this.map = map;

    this.isLonDom180 = true;
    this.isLatTypeOcentric = true;
    this.isLonDirEast = true;

    this.astroMath = new AstroMath(map.target());
    this.lonDisplayElement = L.DomUtil.get("lonCoordinateDisplay");
    this.latDisplayElement = L.DomUtil.get("latCoordinateDisplay");
    this.lonDisplayElement.innerHTML = "---.---";
    this.latDisplayElement.innerHTML = "---.---";

    this.lonDomain180 = L.DomUtil.get("consoleLon180Btn");
    L.DomEvent.on(this.lonDomain180, "click", this.changeLonDomain, this);
    this.lonDomain360 = L.DomUtil.get("consoleLon360Btn");
    L.DomEvent.on(this.lonDomain360, "click", this.changeLonDomain, this);

    this.lonDirectionEast = L.DomUtil.get("consoleLonEastBtn");
    L.DomEvent.on(
      this.lonDirectionEast,
      "click",
      this.changeLonDirection,
      this
    );
    this.lonDirectionWest = L.DomUtil.get("consoleLonWestBtn");
    L.DomEvent.on(
      this.lonDirectionWest,
      "click",
      this.changeLonDirection,
      this
    );

    this.latitudeTypeOcentric = L.DomUtil.get("consoleLatTypeOcentric");
    L.DomEvent.on(this.latitudeTypeOcentric, "click", this.changeLatType, this);
    this.latitudeTypeOgraphic = L.DomUtil.get("consoleLatTypeOgraphic");
    L.DomEvent.on(this.latitudeTypeOgraphic, "click", this.changeLatType, this);

    return this.container;
  },

  /**
   * @function MousePosition.prototype.changeLonDomain
   * @description Is called when a user changes the longitude domain selector. Changes the longitude domain class variable to false if 0 to 360 is selected and true if -180 to 180 is selected.
   * @param  {DomEvent} e  - On change of consoleLonDomSelect.
   */
  changeLonDomain(e) {
    this.isLonDom180 = !this.isLonDom180;
  },

  /**
   * @function MousePosition.prototype.changeLatType
   * @description Is called when a user changes the latitude type selector. Changes the latitude type class variable to false if planetographic is selected and true if isLatTypeOcentric is selected.
   * @param  {DomEvent} e - On change of consoleLatTypeSelect.
   */
  changeLatType(e) {
    this.isLatTypeOcentric = !this.isLatTypeOcentric;
  },

  /**
   * @function MousePosition.prototype.changeLonDirection
   * @description Is called when a user changes the longitude direction selector. Changes the longitude direction class variable to false if positive west is selected and true if positive east is selected.
   * @param  {DomEvent} e - On change of consoleLonDirSelect.
   */
  changeLonDirection(e) {
    this.isLonDirEast = !this.isLonDirEast;
  },

  /**
   * @function MousePosition.prototype.onRemove
   * @description Is called when a user unselects a map.
   * @param  {AstroMap} map - The AstroMap to remove the control from.
   */
  onRemove(map) {
    map.off("mousemove", this.onMouseMove);
  },

  /**
   * @function MousePosition.prototype.onMouseMove
   * @description Is called when a user moves their mouse over the AstroMap. The function uses the class latitude and longitude class variables combined with the AstroMath class to calculate the correct coordinate mouse position of the users mouse pointer.
   * @param  {DomEvent} e - On mouse move over the AstroMap.
   */
  onMouseMove(e) {
    let { lng } = e.latlng;
    let { lat } = e.latlng;

    if (lat &lt;= 90 &amp;&amp; lat >= -90)
    {
      lng = L.Util.wrapNum(lng, [-180.0, 180.0]);

      if (!this.isLatTypeOcentric) {
        lat = this.astroMath.latToPlanetOgraphic(lat);
      }

      if (!this.isLonDom180) {
        lng = this.astroMath.lonTo360(lng, this.map.options.crs.code);
      }

      if (!this.isLonDirEast) {
        lng = this.astroMath.domainToPositiveWest(lng, this.isLonDom180);
      }

      lng = L.Util.formatNum(lng, this.options.numDigits);
      lat = L.Util.formatNum(lat, this.options.numDigits);

      //const value = this.options.lngFirst
      //? lng + this.options.separator + lat
      //: lat + this.options.separator + lng;

      //const prefixAndValue = `${this.options.prefix}${value}`;
      this.lonDisplayElement.innerHTML = lng;
      this.latDisplayElement.innerHTML = lat;
    }
    else
    {
      this.lonDisplayElement.innerHTML = "---.---";
      this.latDisplayElement.innerHTML = "---.---";
    }
  },
  /**
   * @function MousePosition.prototype.onMouseOut
   * @description Displays lat lon on mouse.
   * @param  {DomEvent} e - On mouse out.
   */
  onMouseOut(e) {
    this.lonDisplayElement.innerHTML = "---.---";
    this.latDisplayElement.innerHTML = "---.---";
  }
});

/**
  * @function MousePosition.prototype.mergeOptions
  * @aka L.Map.mergeOptions
  * @description Turns position control false.
  */
L.Map.mergeOptions({
  positionControl: false
});

/**
  * @function MousePosition.prototype.addInitHook
  * @aka L.Map.addInitHook
  * @description Adds position control.
  */
L.Map.addInitHook(function() {
  if (this.options.positionControl) {
    this.positionControl = new L.Control.MousePosition();
    this.addControl(this.positionControl);
  }
});

/**
  * @function MousePosition.prototype.mousePosition
  * @aka L.mousePosition
  * @description Gets mouse position.
  * @return {Object} Mouse position.
  */
L.mousePosition = function(options) {
  return new L.Control.MousePosition(options);
};
</code></pre>
  </article>
</section>

    


  </div>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a>
  </footer>

  <script src="scripts/linenumber.js"></script>
  <script src="scripts/pagelocation.js"></script>

  

</body>
</html>
